(function(i,n){var o=typeof n,f=function(f){return typeof f===o},g=function(f){return typeof f==="function"},q=function(){function r(){if(!c.isReady){try{document.documentElement.doScroll("left")}catch(a){setTimeout(r,1);return}c.init()}}var s={MooTools:"$$",Prototype:"$$",jQuery:"*"},t=1,l={},u={USD:{code:"USD",symbol:"$",name:"US Dollar"},AUD:{code:"AUD",symbol:"$",name:"Australian Dollar"}},j={checkout:[{type:"PayPal",email:"test@test.com"}],currency:"USD",language:"english-us",cookieDuration:30,
paypalHTTPMethod:"GET",paypalSandbox:false,storagePrefix:"sc_",cartStyle:"table",cartColumns:[{attr:"name",label:"Name"},{attr:"price",label:"Price",view:"currency"},{view:"decrement",label:false},{attr:"quantity",label:"Qty",view:"input"},{view:"increment",label:false},{attr:"total",label:"SubTotal",view:"currency"},{view:"remove",text:"Remove",label:false}],excludeFromCheckout:[]},c=function(a){if(g(a))return c.ready(a);else if(typeof a==="object")return c.extend(j,a)};c.extend=function(a,b){f(b)&&
(b=a,a=c);for(var e in b)a[e]=b[e];return a};c.extend({isReady:false,add:function(a){var a=new c.Item(a||{}),b;c.trigger("beforeAdd",[a]);(b=c.has(a))?(b.increment(a.quantity()),a=b):l[a.id()]=a;c.update();c.trigger("afterAdd",[a,f(b)]);return a},each:function(a,b){var e,h=0,m;if(g(a))var f=a,d=l;else if(g(b))f=b,d=a;else return;for(e in d)if(!g(d[e])){m=f.call(c,d[e],h,e);if(m===false)break;h++}},find:function(a){return l[a]},has:function(a){var b,e=false;c.each(function(h){b=true;c.each(a,function(c,
e,f){f!=="quantity"&&f!=="id"&&a[f]!==h[f]&&(b=false)});b&&(e=h)});return e},empty:function(){l={};c.update()},quantity:function(){var a=0;c.each(function(b){a+=b.quantity()});return a},total:function(){var a=0;c.each(function(b){a+=b.total()});return a},update:function(){c.save();c.trigger("update")},init:function(){c.load();c.update();c.ready()},$:function(a){return new c.ELEMENT(c.$engine(a),a)},$create:function(a){return c.$(document.createElement(a))},$engine:{},setupViewTool:function(){for(var a in s){var b,
e,h=i;if(i[a]){for(b=s[a].replace("*",a).split(".");(e=b.shift())&&(h=h[e]););if(typeof h=="function"){c.$engine=h;c.extend(c.ELEMENT._,q[a]);break}}}},save:function(){c.trigger("beforeSave");c.trigger("afterSave")},load:function(){c.trigger("load")},ready:function(a){if(g(a))c.isReady?a.call(c):c.bind("ready",a);else if(f(a)&&!c.isReady)c.trigger("ready"),c.isReady=true},bindReady:function(){if(document.readyState==="complete")return setTimeout(c.init,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",
DOMContentLoaded,false),i.addEventListener("load",c.init,false);else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);i.attachEvent("onload",c.init);var a=false;try{a=i.frameElement==null}catch(b){}document.documentElement.doScroll&&a&&r()}}});c.extend({writeCart:function(){for(var a=j.cartStyle,b=a==="table",e=b?"tr":"div",h=b?"th":"div",f=b?"td":"div",d=c.$create(a),a=c.$create(e).addClass("headerRow"),b=0,g=j.cartColumns.length;b<g;b++){var k=v(j.cartColumns[b]),
i="item-"+(k.attr||k.view||k.label||k.text||"cell")+" "+k.className,k=k.label||"";a.append(c.$create(h).addClass(i).html(k))}d.append(a);c.each(function(a,b){d.append(c.createCartRow(a,b,e,f))});return d},createCartRow:function(a,b,e,h){for(var b=c.$create(e).addClass("itemRow row-"+b+" "+(b%2?"even":"odd")).attr("id","cartItem_"+a.id()),e=0,f=j.cartColumns.length;e<f;e++){var d=v(j.cartColumns[e]),i="item-"+(d.attr||d.view||d.label||d.text||"cell")+" "+d.className,d=(g(d.view)?d.view:typeof d.view===
"string"&&g(p[d.view])?p[d.view]:p.attr).call(c,a,d),i=c.$create(h).addClass(i).html(d);b.append(i)}return b}});var v=function(a){return c.extend({attr:"",label:"",view:"attr",text:"",className:"",hide:false},a||{})},p={attr:function(a,b){return a.get(b.attr)||""},currency:function(a,b){return c.toCurrency(a.get(b.attr)||0)},link:function(a,b){return"<a href='"+a.get(b.attr)+"'>"+b.text+"</a>"},decrement:function(a,b){return"<a href='javascript:;' class='simpleCart_decrement'>"+(b.text||"-")+"</a>"},
increment:function(a,b){return"<a href='javascript:;' class='simpleCart_increment'>"+(b.text||"+")+"</a>"},image:function(a,b){return"<img src='"+a.get(b.attr)+"'/>"},input:function(a,b){return"<input type='text' value='"+a.get(b.attr)+"' class='simpleCart_input'/>"},remove:function(a,b){return"<a href='javascript:;' class='simpleCart_remove'>"+(b.text||"X")+"</a>"}},d=c.Item=function(a){var b={},e=this;typeof a==="object"&&c.extend(b,a);for(b.id=b.id||"SCI-"+ ++t;!f(l[b.id]);)b.id="SCI-"+ ++t;e.get=
function(a,c){usePrototypes=!c;return f(a)?a:g(b[a])?b[a].call(e):!f(b[a])?b[a]:g(e[a])&&usePrototypes?e[a].call(e):!f(e[a])&&usePrototypes?e[a]:b[a]};e.set=function(a,c){f(a)||(b[a]=c);b.quantity<=0&&e.remove();if(b.price<0)b.price=0;return e}};d._=d.prototype={increment:function(a){a=parseInt(a||1,10);this.quantity(this.quantity()+a);return this.quantity()<1?(this.remove(),null):this},decrement:function(a){return this.increment(-parseInt(a||1,10))},remove:function(){delete l[this.id()];c.update();
return null},quantity:function(a){return f(a)?parseInt(this.get("quantity",true)||1,10):this.set("quantity",a)},price:function(a){return f(a)?parseFloat(this.get("price",true)||1):this.set("price",a)},id:function(){return this.get("id",false)},total:function(){return this.quantity()*this.price()}};d={bind:function(a,b){if(!g(b))return this;if(!this._events)this._events={};this._events[a]===true?b.apply(this):f(this._events[a])?this._events[a]=[b]:this._events[a].push(b);return this},trigger:function(a,
b){var c=true;if(!this._events)this._events={};if(!f(this._events[a])&&g(this._events[a][0]))for(var d=0,m=this._events[a].length;d<m;d++)c=this._events[a][d].apply(this,b?b:[]);return c===false?false:true}};c.extend(d);c.extend(c.Item._,d);d=function(){};d={beforeAdd:d,afterAdd:d,load:d,beforeSave:d,afterSave:d,update:d,ready:d,checkoutSuccess:d,checkoutFail:d,checkout:d};c(d);c.each(d,function(a,b,e){c.bind(e,function(){g(j[e])&&j[e].apply(this,arguments)})});c.extend({toCurrency:function(a,b){var e=
parseFloat(a,10),d=c.extend(c.extend({symbol:"$",decimal:".",delimiter:",",accuracy:2,after:false},c.currency()),b),f=e.toFixed(d.accuracy).split("."),e=f[1],f=f[0],f=c.chunk(f.reverse(),3).join(d.delimiter).reverse();return(!d.after?d.symbol:"")+f+(e?d.decimal+e:"")+(d.after?d.symbol:"")},chunk:function(a,b){typeof b==="undefined"&&(b=2);return a.match(RegExp(".{1,"+b+"}","g"))||[]}});String.prototype.reverse=function(){return this.split("").reverse().join("")};c.extend({currency:function(a){if(typeof a===
"string"&&!f(u[a]))j.currency=a;else if(typeof a==="object")u[a.code]=a,j.currency=a.code;else return j.currency}});var n=[{selector:"total",callback:function(){return c.toCurrency(this.total())}},{selector:"quantity",callback:function(){return c.quantity()}},{selector:"items",callback:function(){return c.writeCart()}}],o=[{selector:"checkout",event:"click",callback:function(){c.checkout()}},{selector:"empty",event:"click",callback:function(){c.empty()}},{selector:"increment",event:"click",callback:function(){c.find(c.$(this).parent().parent().attr("id").split("_")[1]).increment();
c.update()}},{selector:"decrement",event:"click",callback:function(){c.find(c.$(this).parent().parent().attr("id").split("_")[1]).decrement();c.update()}},{selector:"remove",event:"click",callback:function(){c.find(c.$(this).parent().parent().attr("id").split("_")[1]).remove()}},{selector:"input",event:"change",callback:function(){var a=c.$(this),b=a.parent(),e=b.attr("class").split(" ");c.each(e,function(e){e.match(/item-.+/i)&&(e=e.split("-")[1],c.find(b.parent().attr("id").split("_")[1]).set(e,
a.val()),c.update())})}}];c.extend({bindOutlets:function(a){c.each(a,function(a){c.bind("update",function(){c.setOutlet(".simpleCart_"+a.selector,a.callback)})})},setOutlet:function(a,b){var e=b.call(c);e.el?c.$(a).html(" ").append(e):c.$(a).text(e)},bindInputs:function(a){c.each(a,function(a){c.setInput(".simpleCart_"+a.selector,a.event,a.callback)})},setInput:function(a,b,e){c.$(a).live(b,e)}});var d=c.ELEMENT=function(a,b){this.el=a;this.selector=b||null},q={MooTools:{text:function(a){return this.attr("text",
a)},html:function(a){return this.attr("html",a)},val:function(a){return this.attr("value",a)},attr:function(a,b){return f(b)?this.el.get(a):(this.el.set(a,b),this)},remove:function(){this.el.dispose();return null},addClass:function(a){this.el.addClass(a);return this},removeClass:function(a){this.el.removeClass(a);return this},each:function(a){g(a)&&c.each(this.el,a);return this},click:function(a){g(a)?this.each(function(b){b.addEvent("click",function(c){a.call(b,c)})}):f(a)&&this.el.fireEvent("click");
return this},live:function(a,b){var e=this.selector;g(b)&&c.$(document).addEvent(a,function(a){var d=c.$(a.target);d.match(e)&&b.call(d,a)})},match:function(a){return this.el.match(a)}},Prototype:{text:function(a){return f(a)?this.el[0].innerHTML:(this.each(function(b){b.update(a)}),this)},html:function(a){return this.text(a)},val:function(a){return this.attr("value",a)},attr:function(a,b){return f(b)?this.el[0].readAttribute(a):(this.each(function(c){c.writeAttribute(a,b)}),this)},remove:function(){this.each(function(a){a.remove()});
return this},addClass:function(a){this.each(function(b){b.addClassName(a)});return this},removeClass:function(a){this.each(function(b){b.removeClassName(a)});return this},each:function(a){g(a)&&c.each(this.el,a);return this},click:function(a){g(a)?this.each(function(b){b.observe("click",function(c){a.call(b,c)})}):f(a)&&this.each(function(a){a.fire("click")});return this},live:function(a,b){if(g(b)){var c=this.selector;document.observe(a,function(a,d){d==a.findElement(c)&&b.call(d,a)})}}},jQuery:{passthrough:function(a,
b){return f(b)?this.el[a]():(this.el[a](b),this)},text:function(a){return this.passthrough("text",a)},html:function(a){return this.passthrough("html",a)},val:function(a){return this.passthrough("val",a)},append:function(a){this.el.append(a.el||a);return this},attr:function(a,b){return f(b)?this.el.attr(a):(this.el.attr(a,b),this)},remove:function(){this.el.remove();return this},addClass:function(a){this.el.addClass(a);return this},removeClass:function(a){this.el.removeClass(a);return this},each:function(a){return this.passthrough("each",
a)},click:function(a){return this.passthrough("click",a)},live:function(a,b){jQuery(document).delegate(this.selector,a,b);return this},parent:function(){return c.$(this.el.parent())}}};d._=d.prototype;c.ready(c.setupViewTool);c.ready(function(){c.bindOutlets(n);c.bindInputs(o)});document.addEventListener?DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);c.init()}:document.attachEvent&&(DOMContentLoaded=function(){document.readyState==="complete"&&
(document.detachEvent("onreadystatechange",DOMContentLoaded),c.init())});c.bindReady();return c}();i.simpleCart=q})(window);